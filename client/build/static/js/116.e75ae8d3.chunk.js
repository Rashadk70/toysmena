"use strict";(self.webpackChunktoysmena_client=self.webpackChunktoysmena_client||[]).push([[116],{379:(e,s,a)=>{a.d(s,{A:()=>r});var n=a(3235),t=a(4414);const r=(0,n.A)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},760:(e,s,a)=>{a.d(s,{A:()=>r});var n=a(3235),t=a(4414);const r=(0,n.A)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3256:(e,s,a)=>{a.d(s,{A:()=>r});var n=a(3235),t=a(4414);const r=(0,n.A)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},6116:(e,s,a)=>{a.r(s),a.d(s,{default:()=>L});var n=a(9950),t=a(3464),r=a(33),c=a(8170),i=a(3174),l=a(6491),o=a(9925),d=a(5979),h=a(3788),u=a(6101),x=a(3266),A=a(9739),j=a(226),p=a(6699),m=a(2053),g=a(2235),y=a(1320),v=a(5769),C=a(9780),f=a(9213),b=a(1671),S=a(4075),w=a(5333),P=a(1434),k=a(3256),E=a(9715),F=a(379),D=a(760),I=a(4414);const q=["Early Years","Curricular","Art & Design","Stationery & Office","Furniture","Exercise Books","Sport","Science","SEN","Facilities","IT & Hardware"];function z(e){let{open:s,handleClose:a,product:p,handleSave:m}=e;const[g,y]=(0,n.useState)({name:"",description:"",price:"",category:"",brand:"",stock:"",image:""}),[v,C]=(0,n.useState)("");(0,n.useEffect)((()=>{y(p||{name:"",description:"",price:"",category:"",brand:"",stock:"",image:""})}),[p]);const f=e=>{y({...g,[e.target.name]:e.target.value})};return(0,I.jsxs)(t.A,{open:s,onClose:a,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(r.A,{children:p?"Edit Product":"Add New Product"}),(0,I.jsxs)(c.A,{children:[v&&(0,I.jsx)(i.A,{severity:"error",sx:{mb:2},children:v}),(0,I.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,I.jsx)(o.A,{name:"name",label:"Product Name",value:g.name,onChange:f,required:!0}),(0,I.jsx)(o.A,{name:"description",label:"Description",value:g.description,onChange:f,multiline:!0,rows:4}),(0,I.jsx)(o.A,{name:"price",label:"Price (AED)",type:"number",value:g.price,onChange:f,required:!0}),(0,I.jsxs)(d.A,{children:[(0,I.jsx)(h.A,{children:"Category"}),(0,I.jsx)(u.A,{name:"category",value:g.category,onChange:f,required:!0,children:q.map((e=>(0,I.jsx)(x.A,{value:e,children:e},e)))})]}),(0,I.jsx)(o.A,{name:"brand",label:"Brand",value:g.brand,onChange:f}),(0,I.jsx)(o.A,{name:"stock",label:"Stock",type:"number",value:g.stock,onChange:f,required:!0}),(0,I.jsx)(o.A,{name:"image",label:"Image URL",value:g.image,onChange:f})]})]}),(0,I.jsxs)(A.A,{children:[(0,I.jsx)(j.A,{onClick:a,children:"Cancel"}),(0,I.jsxs)(j.A,{onClick:()=>{g.name&&g.price&&g.category?(m(g),a()):C("Please fill in all required fields")},variant:"contained",children:[p?"Update":"Add"," Product"]})]})]})}const L=function(){const[e,s]=(0,n.useState)([]),[a,t]=(0,n.useState)(!0),[r,c]=(0,n.useState)(""),[A,L]=(0,n.useState)(0),[M,N]=(0,n.useState)(10),[T,H]=(0,n.useState)(!1),[O,U]=(0,n.useState)(null),[V,W]=(0,n.useState)(""),[B,R]=(0,n.useState)(""),$=async()=>{try{t(!0);const e=await fetch("/api/admin/products"),a=await e.json();a.success?s(a.products):c(a.message)}catch(e){c("Failed to fetch products")}finally{t(!1)}};(0,n.useEffect)((()=>{$()}),[]);const _=e.filter((e=>{const s=e.name.toLowerCase().includes(V.toLowerCase()),a=!B||e.category===B;return s&&a}));return a?(0,I.jsx)(p.A,{}):(0,I.jsxs)(l.A,{children:[(0,I.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,I.jsx)(m.A,{variant:"h4",children:"Products"}),(0,I.jsx)(j.A,{variant:"contained",startIcon:(0,I.jsx)(k.A,{}),onClick:()=>{U(null),H(!0)},children:"Add Product"})]}),r&&(0,I.jsx)(i.A,{severity:"error",sx:{mb:2},children:r}),(0,I.jsx)(g.A,{sx:{mb:2,p:2},children:(0,I.jsxs)(l.A,{sx:{display:"flex",gap:2},children:[(0,I.jsx)(o.A,{label:"Search Products",value:V,onChange:e=>W(e.target.value),InputProps:{startAdornment:(0,I.jsx)(E.A,{})}}),(0,I.jsxs)(d.A,{sx:{minWidth:200},children:[(0,I.jsx)(h.A,{children:"Filter by Category"}),(0,I.jsxs)(u.A,{value:B,onChange:e=>R(e.target.value),label:"Filter by Category",children:[(0,I.jsx)(x.A,{value:"",children:"All Categories"}),q.map((e=>(0,I.jsx)(x.A,{value:e,children:e},e)))]})]})]})}),(0,I.jsxs)(y.A,{component:g.A,children:[(0,I.jsxs)(v.A,{children:[(0,I.jsx)(C.A,{children:(0,I.jsxs)(f.A,{children:[(0,I.jsx)(b.A,{children:"Image"}),(0,I.jsx)(b.A,{children:"Name"}),(0,I.jsx)(b.A,{children:"Category"}),(0,I.jsx)(b.A,{children:"Price"}),(0,I.jsx)(b.A,{children:"Stock"}),(0,I.jsx)(b.A,{children:"Actions"})]})}),(0,I.jsx)(S.A,{children:_.slice(A*M,A*M+M).map((e=>(0,I.jsxs)(f.A,{children:[(0,I.jsx)(b.A,{children:(0,I.jsx)(l.A,{component:"img",src:e.image,alt:e.name,sx:{width:50,height:50,objectFit:"contain"}})}),(0,I.jsx)(b.A,{children:e.name}),(0,I.jsx)(b.A,{children:e.category}),(0,I.jsxs)(b.A,{children:["AED ",e.price]}),(0,I.jsx)(b.A,{children:e.stock}),(0,I.jsxs)(b.A,{children:[(0,I.jsx)(w.A,{color:"primary",onClick:()=>(e=>{U(e),H(!0)})(e),children:(0,I.jsx)(F.A,{})}),(0,I.jsx)(w.A,{color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{const s=await fetch(`/api/admin/products/${e}`,{method:"DELETE"}),a=await s.json();a.success?$():c(a.message)}catch(s){c("Failed to delete product")}})(e.id),children:(0,I.jsx)(D.A,{})})]})]},e.id)))})]}),(0,I.jsx)(P.A,{rowsPerPageOptions:[5,10,25],component:"div",count:_.length,rowsPerPage:M,page:A,onPageChange:(e,s)=>{L(s)},onRowsPerPageChange:e=>{N(parseInt(e.target.value,10)),L(0)}})]}),(0,I.jsx)(z,{open:T,handleClose:()=>H(!1),product:O,handleSave:async e=>{try{const s=O?`/api/admin/products/${O.id}`:"/api/admin/products",a=O?"PUT":"POST",n=await fetch(s,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await n.json();t.success?$():c(t.message)}catch(s){c("Failed to save product")}}})]})}}}]);