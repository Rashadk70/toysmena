"use strict";(self.webpackChunktoysmena_client=self.webpackChunktoysmena_client||[]).push([[286],{1286:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var s=n(9950),i=n(6491),a=n(6639),l=n(2053),o=n(226),r=n(3174),d=n(2235),c=n(1966),h=n(4142),m=n(899),x=n(9925),p=n(975),u=n(957),g=n(4745),A=n(8587),j=n(8168),b=n(2004),y=n(8465),v=n(1676),f=n(5866),S=n(9766),C=n(9254),E=n(1763),w=n(423);function P(e){return(0,w.Ay)("MuiInputAdornment",e)}const k=(0,E.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var I,T=n(8463),W=n(4414);const M=["children","className","component","disablePointerEvents","disableTypography","position","variant"],F=(0,C.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,v.A)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,j.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${k.positionStart}&:not(.${k.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),z=s.forwardRef((function(e,t){const n=(0,T.b)({props:e,name:"MuiInputAdornment"}),{children:i,className:a,component:o="div",disablePointerEvents:r=!1,disableTypography:d=!1,position:c,variant:h}=n,m=(0,A.A)(n,M),x=(0,S.A)()||{};let p=h;h&&x.variant,x&&!p&&(p=x.variant);const u=(0,j.A)({},n,{hiddenLabel:x.hiddenLabel,size:x.size,disablePointerEvents:r,position:c,variant:p}),g=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:s,position:i,size:a,variant:l}=e,o={root:["root",n&&"disablePointerEvents",i&&`position${(0,v.A)(i)}`,l,s&&"hiddenLabel",a&&`size${(0,v.A)(a)}`]};return(0,y.A)(o,P,t)})(u);return(0,W.jsx)(f.A.Provider,{value:null,children:(0,W.jsx)(F,(0,j.A)({as:o,ownerState:u,className:(0,b.A)(g.root,a),ref:t},m,{children:"string"!==typeof i||d?(0,W.jsxs)(s.Fragment,{children:["start"===c?I||(I=(0,W.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,W.jsx)(l.A,{color:"text.secondary",children:i})}))})}));var N=n(9240),D=n(3235);const L=(0,D.A)((0,W.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var U=n(5333),K=n(760);const H=(0,D.A)((0,W.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const O=function(e){let{value:t,onChange:n,maxSize:r=5242880,acceptedTypes:c=["image/jpeg","image/png","image/webp"],width:h="100%",height:m=200,showPreview:x=!0}=e;const[p,u]=(0,s.useState)(!1),[g,A]=(0,s.useState)(""),j=(0,s.useRef)(null),b=()=>{var e;null===(e=j.current)||void 0===e||e.click()};return(0,W.jsxs)(i.A,{children:[(0,W.jsx)("input",{type:"file",ref:j,onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s)if(c.includes(s.type))if(s.size>r)A(`File size must be less than ${r/1024/1024}MB`);else{u(!0),A("");try{const e=new FormData;e.append("image",s);const t=await fetch("/api/upload",{method:"POST",body:e}),i=await t.json();i.success?n(i.url):A(i.message||"Failed to upload image")}catch(i){A("Failed to upload image")}finally{u(!1)}}else A(`Invalid file type. Accepted types: ${c.join(", ")}`)},accept:c.join(","),style:{display:"none"}}),x&&t?(0,W.jsxs)(d.A,{sx:{width:h,height:m,position:"relative",mb:2,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[(0,W.jsx)("img",{src:t,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),(0,W.jsx)(U.A,{sx:{position:"absolute",top:8,right:8,bgcolor:"background.paper"},onClick:()=>{n(""),A("")},children:(0,W.jsx)(K.A,{})})]}):(0,W.jsx)(d.A,{sx:{width:h,height:m,mb:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"2px dashed",borderColor:"divider","&:hover":{borderColor:"primary.main"}},onClick:b,children:p?(0,W.jsx)(a.A,{}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(H,{sx:{fontSize:48,color:"text.secondary",mb:1}}),(0,W.jsx)(l.A,{color:"text.secondary",children:"Click or drag image to upload"}),(0,W.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["Max size: ",r/1024/1024,"MB"]})]})}),g&&(0,W.jsx)(l.A,{color:"error",variant:"caption",sx:{mt:1},children:g}),!x&&(0,W.jsx)(o.A,{variant:"outlined",startIcon:(0,W.jsx)(H,{}),onClick:b,disabled:p,children:p?"Uploading...":"Upload Image"})]})};function R(e){let{children:t,value:n,index:s}=e;return(0,W.jsx)(i.A,{role:"tabpanel",hidden:n!==s,id:`settings-tabpanel-${s}`,"aria-labelledby":`settings-tab-${s}`,sx:{py:3},children:n===s&&t})}const $=function(){const[e,t]=(0,s.useState)(0),[n,A]=(0,s.useState)(!0),[j,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(""),[f,S]=(0,s.useState)(""),[C,E]=(0,s.useState)({storeName:"",storeEmail:"",storePhone:"",storeAddress:"",currency:"AED",logo:"",favicon:""}),[w,P]=(0,s.useState)({stripeEnabled:!0,stripePublicKey:"",stripeSecretKey:"",codEnabled:!0,minimumOrderAmount:0}),[k,I]=(0,s.useState)({smtpHost:"",smtpPort:"",smtpUser:"",smtpPass:"",smtpFrom:"",smtpSecure:!0}),[T,M]=(0,s.useState)({freeShippingEnabled:!0,freeShippingThreshold:200,defaultShippingCost:20,internationalShippingEnabled:!1,internationalShippingCost:100,shippingCountries:[]}),[F,D]=(0,s.useState)({metaTitle:"",metaDescription:"",metaKeywords:"",googleAnalyticsId:"",facebookPixelId:""}),[U,K]=(0,s.useState)({orderConfirmationEnabled:!0,orderStatusUpdateEnabled:!0,lowStockNotificationEnabled:!0,lowStockThreshold:5,newsletterEnabled:!0});(0,s.useEffect)((()=>{H()}),[]);const H=async()=>{try{A(!0);const e=await fetch("/api/admin/settings"),t=await e.json();t.success?(E(t.settings.general),P(t.settings.payment),I(t.settings.email),M(t.settings.shipping),D(t.settings.seo),K(t.settings.notifications)):S(t.message)}catch(e){S("Failed to fetch settings")}finally{A(!1)}},$=e=>{E({...C,[e.target.name]:e.target.value})},B=e=>{const t="checkbox"===e.target.type?e.target.checked:e.target.value;P({...w,[e.target.name]:t})},V=e=>{const t="checkbox"===e.target.type?e.target.checked:e.target.value;I({...k,[e.target.name]:t})},G=e=>{const t="checkbox"===e.target.type?e.target.checked:e.target.value;M({...T,[e.target.name]:t})},_=e=>{D({...F,[e.target.name]:e.target.value})},J=e=>{const t="checkbox"===e.target.type?e.target.checked:e.target.value;K({...U,[e.target.name]:t})};return n?(0,W.jsx)(i.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,W.jsx)(a.A,{})}):(0,W.jsxs)(i.A,{children:[(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,W.jsx)(l.A,{variant:"h4",children:"Settings"}),(0,W.jsxs)(i.A,{children:[(0,W.jsx)(o.A,{startIcon:(0,W.jsx)(N.A,{}),onClick:H,sx:{mr:1},children:"Refresh"}),(0,W.jsx)(o.A,{variant:"contained",startIcon:(0,W.jsx)(L,{}),onClick:async()=>{try{b(!0),S(""),v("");const e=await fetch("/api/admin/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({general:C,payment:w,email:k,shipping:T,seo:F,notifications:U})}),t=await e.json();t.success?v("Settings saved successfully"):S(t.message)}catch(e){S("Failed to save settings")}finally{b(!1)}},disabled:j,children:j?"Saving...":"Save Changes"})]})]}),y&&(0,W.jsx)(r.A,{severity:"success",sx:{mb:2},children:y}),f&&(0,W.jsx)(r.A,{severity:"error",sx:{mb:2},children:f}),(0,W.jsxs)(d.A,{sx:{mb:3},children:[(0,W.jsxs)(c.A,{value:e,onChange:(e,n)=>{t(n)},variant:"scrollable",scrollButtons:"auto",children:[(0,W.jsx)(h.A,{label:"General"}),(0,W.jsx)(h.A,{label:"Payment"}),(0,W.jsx)(h.A,{label:"Email"}),(0,W.jsx)(h.A,{label:"Shipping"}),(0,W.jsx)(h.A,{label:"SEO"}),(0,W.jsx)(h.A,{label:"Notifications"})]}),(0,W.jsx)(R,{value:e,index:0,children:(0,W.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,W.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,W.jsx)(O,{value:C.logo,onChange:e=>E({...C,logo:e}),height:150}),(0,W.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Store Logo (Recommended size: 200x50px)"})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,W.jsx)(O,{value:C.favicon,onChange:e=>E({...C,favicon:e}),height:150}),(0,W.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Favicon (Recommended size: 32x32px)"})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Store Name",name:"storeName",value:C.storeName,onChange:$})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Store Email",name:"storeEmail",type:"email",value:C.storeEmail,onChange:$})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Store Phone",name:"storePhone",value:C.storePhone,onChange:$})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Store Address",name:"storeAddress",multiline:!0,rows:3,value:C.storeAddress,onChange:$})})]})}),(0,W.jsx)(R,{value:e,index:1,children:(0,W.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:w.stripeEnabled,onChange:B,name:"stripeEnabled"}),label:"Enable Stripe Payments"})}),w.stripeEnabled&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Stripe Public Key",name:"stripePublicKey",value:w.stripePublicKey,onChange:B})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Stripe Secret Key",name:"stripeSecretKey",type:"password",value:w.stripeSecretKey,onChange:B})})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(g.A,{sx:{my:2}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:w.codEnabled,onChange:B,name:"codEnabled"}),label:"Enable Cash on Delivery"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Minimum Order Amount",name:"minimumOrderAmount",type:"number",value:w.minimumOrderAmount,onChange:B,InputProps:{startAdornment:(0,W.jsx)(z,{position:"start",children:"AED"})}})})]})}),(0,W.jsx)(R,{value:e,index:2,children:(0,W.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"SMTP Host",name:"smtpHost",value:k.smtpHost,onChange:V})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"SMTP Port",name:"smtpPort",value:k.smtpPort,onChange:V})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"SMTP Username",name:"smtpUser",value:k.smtpUser,onChange:V})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"SMTP Password",name:"smtpPass",type:"password",value:k.smtpPass,onChange:V})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"From Email",name:"smtpFrom",value:k.smtpFrom,onChange:V})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:k.smtpSecure,onChange:V,name:"smtpSecure"}),label:"Use Secure Connection (SSL/TLS)"})})]})}),(0,W.jsx)(R,{value:e,index:3,children:(0,W.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:T.freeShippingEnabled,onChange:G,name:"freeShippingEnabled"}),label:"Enable Free Shipping"})}),T.freeShippingEnabled&&(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Free Shipping Threshold",name:"freeShippingThreshold",type:"number",value:T.freeShippingThreshold,onChange:G,InputProps:{startAdornment:(0,W.jsx)(z,{position:"start",children:"AED"})}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Default Shipping Cost",name:"defaultShippingCost",type:"number",value:T.defaultShippingCost,onChange:G,InputProps:{startAdornment:(0,W.jsx)(z,{position:"start",children:"AED"})}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:T.internationalShippingEnabled,onChange:G,name:"internationalShippingEnabled"}),label:"Enable International Shipping"})}),T.internationalShippingEnabled&&(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"International Shipping Cost",name:"internationalShippingCost",type:"number",value:T.internationalShippingCost,onChange:G,InputProps:{startAdornment:(0,W.jsx)(z,{position:"start",children:"AED"})}})})]})}),(0,W.jsx)(R,{value:e,index:4,children:(0,W.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Meta Title",name:"metaTitle",value:F.metaTitle,onChange:_})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Meta Description",name:"metaDescription",multiline:!0,rows:3,value:F.metaDescription,onChange:_})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Meta Keywords",name:"metaKeywords",value:F.metaKeywords,onChange:_,helperText:"Separate keywords with commas"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Google Analytics ID",name:"googleAnalyticsId",value:F.googleAnalyticsId,onChange:_})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Facebook Pixel ID",name:"facebookPixelId",value:F.facebookPixelId,onChange:_})})]})}),(0,W.jsx)(R,{value:e,index:5,children:(0,W.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:U.orderConfirmationEnabled,onChange:J,name:"orderConfirmationEnabled"}),label:"Send Order Confirmation Emails"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:U.orderStatusUpdateEnabled,onChange:J,name:"orderStatusUpdateEnabled"}),label:"Send Order Status Update Emails"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:U.lowStockNotificationEnabled,onChange:J,name:"lowStockNotificationEnabled"}),label:"Enable Low Stock Notifications"})}),U.lowStockNotificationEnabled&&(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(x.A,{fullWidth:!0,label:"Low Stock Threshold",name:"lowStockThreshold",type:"number",value:U.lowStockThreshold,onChange:J})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(p.A,{control:(0,W.jsx)(u.A,{checked:U.newsletterEnabled,onChange:J,name:"newsletterEnabled"}),label:"Enable Newsletter Subscription"})})]})})]})]})}},9240:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(3235),i=n(4414);const a=(0,s.A)((0,i.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")}}]);