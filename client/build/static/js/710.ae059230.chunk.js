"use strict";(self.webpackChunktoysmena_client=self.webpackChunktoysmena_client||[]).push([[710],{379:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(3235),i=n(4414);const a=(0,s.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},704:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(8168),i=n(8587),a=n(9950),o=n(2004),r=n(8465),c=n(9254),d=n(8463),l=n(1763),m=n(423);function A(e){return(0,m.Ay)("MuiCardContent",e)}(0,l.A)("MuiCardContent",["root"]);var h=n(4414);const x=["className","component"],j=(0,c.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),u=a.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiCardContent"}),{className:a,component:c="div"}=n,l=(0,i.A)(n,x),m=(0,s.A)({},n,{component:c}),u=(e=>{const{classes:t}=e;return(0,r.A)({root:["root"]},A,t)})(m);return(0,h.jsx)(j,(0,s.A)({as:c,className:(0,o.A)(u.root,a),ownerState:m,ref:t},l))}))},2329:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var s=n(9950),i=n(2235),a=n(6491),o=n(2053),r=n(226),c=n(899),d=n(8089),l=n(3569),m=n(704),A=n(975),h=n(957),x=n(5713),j=n(5333),u=n(5277),p=n(9808),g=n(3174),v=n(1966),y=n(4142),f=n(3256),C=n(379),b=n(760),k=n(3235),w=n(4414);const S=(0,k.A)((0,w.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator"),M=()=>{const[e,t]=(0,s.useState)(0),[n,k]=(0,s.useState)([]),[M,_]=(0,s.useState)([]),[N,R]=(0,s.useState)([]),[I,E]=(0,s.useState)([]),[U,D]=(0,s.useState)(!1),[F,$]=(0,s.useState)(""),[z,P]=(0,s.useState)(null),[B,L]=(0,s.useState)(""),[T,V]=(0,s.useState)(!1),[O,H]=(0,s.useState)({title:"",description:"",imageUrl:"",link:"",active:!0}),[J,W]=(0,s.useState)({name:"",imageUrl:"",description:"",position:0,active:!0}),[q,G]=(0,s.useState)({title:"",description:"",imageUrl:"",discountType:"percentage",discountValue:"",startDate:"",endDate:"",active:!0}),[K,Q]=(0,s.useState)({title:"",type:"products",layout:"grid",items:[],backgroundColor:"#ffffff",textColor:"#000000",active:!0});(0,s.useEffect)((()=>{X()}),[]);const X=async()=>{try{V(!0);const e=await fetch("/api/admin/home-content"),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to fetch home content");k(t.banners||[]),_(t.featuredCategories||[]),R(t.promotions||[]),E(t.customSections||[])}catch(e){L(e.message)}finally{V(!1)}},Y=async(e,t,s)=>{try{const i=await fetch(`/api/admin/home-content/${e}/${t}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:s})}),a=await i.json();if(!i.ok)throw new Error(a.message||"Failed to update status");switch(e){case"banner":k(n.map((e=>e._id===t?{...e,active:s}:e)));break;case"category":_((e=>e.map((e=>e._id===t?{...e,active:s}:e))));break;case"promotion":R((e=>e.map((e=>e._id===t?{...e,active:s}:e))));break;case"custom":E((e=>e.map((e=>e._id===t?{...e,active:s}:e))))}}catch(i){L(i.message)}},Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$(e),P(t),D(!0)},ee=async(e,t)=>{if(window.confirm("Are you sure you want to delete this item?"))try{const s=await fetch(`/api/admin/home-content/${e}/${t}`,{method:"DELETE"});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to delete item")}switch(e){case"banners":k(n.filter((e=>e._id!==t)));break;case"categories":_((e=>e.filter((e=>e._id!==t))));break;case"promotions":R((e=>e.filter((e=>e._id!==t))));break;case"custom-sections":E((e=>e.filter((e=>e._id!==t))))}}catch(s){L(s.message)}};return(0,w.jsxs)(p.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[B&&(0,w.jsx)(g.A,{severity:"error",sx:{mb:2},children:B}),(0,w.jsxs)(v.A,{value:e,onChange:(e,n)=>{t(n)},sx:{mb:3},children:[(0,w.jsx)(y.A,{label:"Banners"}),(0,w.jsx)(y.A,{label:"Featured Categories"}),(0,w.jsx)(y.A,{label:"Promotions"}),(0,w.jsx)(y.A,{label:"Custom Sections"})]}),0===e&&(0,w.jsxs)(i.A,{sx:{p:3,mb:4},children:[(0,w.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,w.jsx)(o.A,{variant:"h5",children:"Banners"}),(0,w.jsx)(r.A,{variant:"contained",startIcon:(0,w.jsx)(f.A,{}),onClick:()=>Z("banner"),children:"Add Banner"})]}),(0,w.jsx)(c.Ay,{container:!0,spacing:2,children:n.map((e=>(0,w.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,w.jsxs)(d.A,{children:[(0,w.jsx)(l.A,{component:"img",height:"140",image:e.imageUrl,alt:e.title}),(0,w.jsxs)(m.A,{children:[(0,w.jsx)(o.A,{variant:"h6",children:e.title}),(0,w.jsx)(o.A,{variant:"body2",color:"text.secondary",children:e.description}),(0,w.jsx)(A.A,{control:(0,w.jsx)(h.A,{checked:e.active,onChange:t=>Y("banner",e._id,t.target.checked)}),label:"Active"})]}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(j.A,{onClick:()=>Z("banner",e),children:(0,w.jsx)(C.A,{})}),(0,w.jsx)(j.A,{onClick:()=>ee("banners",e._id),children:(0,w.jsx)(b.A,{})}),(0,w.jsx)(j.A,{children:(0,w.jsx)(S,{})})]})]})},e._id)))})]}),1===e&&(0,w.jsxs)(i.A,{sx:{p:3,mb:4},children:[(0,w.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,w.jsx)(o.A,{variant:"h5",children:"Featured Categories"}),(0,w.jsx)(r.A,{variant:"contained",startIcon:(0,w.jsx)(f.A,{}),onClick:()=>Z("category"),children:"Add Category"})]}),(0,w.jsx)(c.Ay,{container:!0,spacing:2,children:M.map((e=>(0,w.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(d.A,{children:[(0,w.jsx)(l.A,{component:"img",height:"120",image:e.imageUrl,alt:e.name}),(0,w.jsxs)(m.A,{children:[(0,w.jsx)(o.A,{variant:"h6",children:e.name}),(0,w.jsx)(o.A,{variant:"body2",color:"text.secondary",children:e.description}),(0,w.jsx)(A.A,{control:(0,w.jsx)(h.A,{checked:e.active,onChange:t=>Y("category",e._id,t.target.checked)}),label:"Active"})]}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(j.A,{onClick:()=>Z("category",e),children:(0,w.jsx)(C.A,{})}),(0,w.jsx)(j.A,{onClick:()=>ee("categories",e._id),children:(0,w.jsx)(b.A,{})})]})]})},e._id)))})]}),2===e&&(0,w.jsxs)(i.A,{sx:{p:3,mb:4},children:[(0,w.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,w.jsx)(o.A,{variant:"h5",children:"Promotional Sections"}),(0,w.jsx)(r.A,{variant:"contained",startIcon:(0,w.jsx)(f.A,{}),onClick:()=>Z("promotion"),children:"Add Promotion"})]}),(0,w.jsx)(c.Ay,{container:!0,spacing:2,children:N.map((e=>(0,w.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,w.jsxs)(d.A,{children:[(0,w.jsx)(l.A,{component:"img",height:"140",image:e.imageUrl,alt:e.title}),(0,w.jsxs)(m.A,{children:[(0,w.jsx)(o.A,{variant:"h6",children:e.title}),(0,w.jsx)(o.A,{variant:"body2",color:"text.secondary",children:e.description}),(0,w.jsxs)(a.A,{sx:{mt:1},children:[(0,w.jsx)(u.A,{label:`Valid until: ${new Date(e.validUntil).toLocaleDateString()}`,color:"primary",size:"small",sx:{mr:1}}),(0,w.jsx)(A.A,{control:(0,w.jsx)(h.A,{checked:e.active,onChange:t=>Y("promotion",e._id,t.target.checked)}),label:"Active"})]})]}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(j.A,{onClick:()=>Z("promotion",e),children:(0,w.jsx)(C.A,{})}),(0,w.jsx)(j.A,{onClick:()=>ee("promotions",e._id),children:(0,w.jsx)(b.A,{})})]})]})},e._id)))})]}),3===e&&(0,w.jsxs)(i.A,{sx:{p:3},children:[(0,w.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,w.jsx)(o.A,{variant:"h5",children:"Custom Sections"}),(0,w.jsx)(r.A,{variant:"contained",startIcon:(0,w.jsx)(f.A,{}),onClick:()=>Z("custom"),children:"Add Section"})]}),(0,w.jsx)(c.Ay,{container:!0,spacing:2,children:I.map((e=>(0,w.jsx)(c.Ay,{item:!0,xs:12,children:(0,w.jsxs)(d.A,{children:[(0,w.jsxs)(m.A,{children:[(0,w.jsx)(o.A,{variant:"h6",children:e.title}),(0,w.jsx)(o.A,{variant:"body2",color:"text.secondary",children:e.content}),(0,w.jsx)(A.A,{control:(0,w.jsx)(h.A,{checked:e.active,onChange:t=>Y("custom",e._id,t.target.checked)}),label:"Active"})]}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(j.A,{onClick:()=>Z("custom",e),children:(0,w.jsx)(C.A,{})}),(0,w.jsx)(j.A,{onClick:()=>ee("custom-sections",e._id),children:(0,w.jsx)(b.A,{})})]})]})},e._id)))})]})]})}},3256:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(3235),i=n(4414);const a=(0,s.A)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3569:(e,t,n)=>{n.d(t,{A:()=>g});var s=n(8587),i=n(8168),a=n(9950),o=n(2004),r=n(8465),c=n(8463),d=n(9254),l=n(1763),m=n(423);function A(e){return(0,m.Ay)("MuiCardMedia",e)}(0,l.A)("MuiCardMedia",["root","media","img"]);var h=n(4414);const x=["children","className","component","image","src","style"],j=(0,d.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:s,isImageComponent:i}=n;return[t.root,s&&t.media,i&&t.img]}})((e=>{let{ownerState:t}=e;return(0,i.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),u=["video","audio","picture","iframe","img"],p=["picture","img"],g=a.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiCardMedia"}),{children:a,className:d,component:l="div",image:m,src:g,style:v}=n,y=(0,s.A)(n,x),f=-1!==u.indexOf(l),C=!f&&m?(0,i.A)({backgroundImage:`url("${m}")`},v):v,b=(0,i.A)({},n,{component:l,isMediaComponent:f,isImageComponent:-1!==p.indexOf(l)}),k=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:s}=e,i={root:["root",n&&"media",s&&"img"]};return(0,r.A)(i,A,t)})(b);return(0,h.jsx)(j,(0,i.A)({className:(0,o.A)(k.root,d),as:l,role:!f&&m?"img":void 0,ref:t,style:C,ownerState:b,src:f?m||g:void 0},y,{children:a}))}))},5713:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(8587),i=n(8168),a=n(9950),o=n(2004),r=n(8465),c=n(9254),d=n(8463),l=n(1763),m=n(423);function A(e){return(0,m.Ay)("MuiCardActions",e)}(0,l.A)("MuiCardActions",["root","spacing"]);var h=n(4414);const x=["disableSpacing","className"],j=(0,c.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,i.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),u=a.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:c}=n,l=(0,s.A)(n,x),m=(0,i.A)({},n,{disableSpacing:a}),u=(e=>{const{classes:t,disableSpacing:n}=e,s={root:["root",!n&&"spacing"]};return(0,r.A)(s,A,t)})(m);return(0,h.jsx)(j,(0,i.A)({className:(0,o.A)(u.root,c),ownerState:m,ref:t},l))}))},8089:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(8168),i=n(8587),a=n(9950),o=n(2004),r=n(8465),c=n(9254),d=n(8463),l=n(2235),m=n(1763),A=n(423);function h(e){return(0,A.Ay)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var x=n(4414);const j=["className","raised"],u=(0,c.Ay)(l.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),p=a.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiCard"}),{className:a,raised:c=!1}=n,l=(0,i.A)(n,j),m=(0,s.A)({},n,{raised:c}),A=(e=>{const{classes:t}=e;return(0,r.A)({root:["root"]},h,t)})(m);return(0,x.jsx)(u,(0,s.A)({className:(0,o.A)(A.root,a),elevation:c?8:void 0,ref:t,ownerState:m},l))}))}}]);