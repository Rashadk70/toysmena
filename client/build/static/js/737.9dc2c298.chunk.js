"use strict";(self.webpackChunktoysmena_client=self.webpackChunktoysmena_client||[]).push([[737],{6737:(e,r,s)=>{s.r(r),s.d(r,{default:()=>b});var a=s(9950),i=s(6491),n=s(9808),t=s(2235),l=s(1966),o=s(4142),d=s(3174),u=s(899),c=s(2053),m=s(9925),p=s(226),h=s(6639),x=s(8429),f=s(2569),A=s(3264),v=s(4414);function w(e){const{children:r,value:s,index:a,...n}=e;return(0,v.jsx)("div",{role:"tabpanel",hidden:s!==a,id:`account-tabpanel-${a}`,...n,children:s===a&&(0,v.jsx)(i.A,{sx:{p:3},children:r})})}function b(){const[e,r]=(0,a.useState)(0),[s,b]=(0,a.useState)({name:"",email:"",phone:"",address:""}),[j,y]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[P,g]=(0,a.useState)(""),[C,F]=(0,a.useState)(""),[R,S]=(0,a.useState)(!1),T=(0,x.Zp)(),z=(0,f.wA)(),{user:W}=(0,f.d4)((e=>e.auth));(0,a.useEffect)((()=>{W?b({name:W.name||"",email:W.email||"",phone:W.phone||"",address:W.address||""}):T("/login")}),[W,T]);const q=e=>{b({...s,[e.target.name]:e.target.value})},N=e=>{y({...j,[e.target.name]:e.target.value})};return(0,v.jsx)(n.A,{maxWidth:"md",sx:{mt:4,mb:4},children:(0,v.jsxs)(t.A,{elevation:3,children:[(0,v.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,v.jsxs)(l.A,{value:e,onChange:(e,s)=>{r(s),g(""),F("")},centered:!0,children:[(0,v.jsx)(o.A,{label:"Profile"}),(0,v.jsx)(o.A,{label:"Password"})]})}),P&&(0,v.jsx)(d.A,{severity:"error",sx:{m:2},children:P}),C&&(0,v.jsx)(d.A,{severity:"success",sx:{m:2},children:C}),(0,v.jsx)(w,{value:e,index:0,children:(0,v.jsx)("form",{onSubmit:async e=>{e.preventDefault(),S(!0),g(""),F("");try{await z((0,A.r7)(s)),F("Profile updated successfully")}catch(r){g(r.message||"Failed to update profile")}S(!1)},children:(0,v.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(c.A,{variant:"h6",children:"Profile Information"})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"Name",name:"name",value:s.name,onChange:q})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"Email",name:"email",type:"email",value:s.email,onChange:q})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"Phone",name:"phone",value:s.phone,onChange:q})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"Address",name:"address",multiline:!0,rows:3,value:s.address,onChange:q})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",disabled:R,children:R?(0,v.jsx)(h.A,{size:24}):"Update Profile"})})]})})}),(0,v.jsx)(w,{value:e,index:1,children:(0,v.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),S(!0),g(""),F(""),j.newPassword!==j.confirmPassword)return g("New passwords do not match"),void S(!1);try{await z((0,A.f3)(j)),F("Password updated successfully"),y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){g(r.message||"Failed to update password")}S(!1)},children:(0,v.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(c.A,{variant:"h6",children:"Change Password"})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"Current Password",name:"currentPassword",type:"password",value:j.currentPassword,onChange:N})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"New Password",name:"newPassword",type:"password",value:j.newPassword,onChange:N})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(m.A,{fullWidth:!0,label:"Confirm New Password",name:"confirmPassword",type:"password",value:j.confirmPassword,onChange:N})}),(0,v.jsx)(u.Ay,{item:!0,xs:12,children:(0,v.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",disabled:R,children:R?(0,v.jsx)(h.A,{size:24}):"Update Password"})})]})})})]})})}},9925:(e,r,s)=>{s.d(r,{A:()=>N});var a=s(8168),i=s(8587),n=s(9950),t=s(2004),l=s(8465),o=s(3539),d=s(9254),u=s(8463),c=s(9890),m=s(470),p=s(3198),h=s(3788),x=s(5979),f=s(8624),A=s(9766),v=s(1676),w=s(1763),b=s(423);function j(e){return(0,b.Ay)("MuiFormHelperText",e)}const y=(0,w.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var P,g=s(4414);const C=["children","className","component","disabled","error","filled","focused","margin","required","variant"],F=(0,d.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,s.size&&r[`size${(0,v.A)(s.size)}`],s.contained&&r.contained,s.filled&&r.filled]}})((e=>{let{theme:r,ownerState:s}=e;return(0,a.A)({color:(r.vars||r).palette.text.secondary},r.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${y.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${y.error}`]:{color:(r.vars||r).palette.error.main}},"small"===s.size&&{marginTop:4},s.contained&&{marginLeft:14,marginRight:14})})),R=n.forwardRef((function(e,r){const s=(0,u.b)({props:e,name:"MuiFormHelperText"}),{children:n,className:o,component:d="p"}=s,c=(0,i.A)(s,C),m=(0,A.A)(),p=(0,f.A)({props:s,muiFormControl:m,states:["variant","size","disabled","error","filled","focused","required"]}),h=(0,a.A)({},s,{component:d,contained:"filled"===p.variant||"outlined"===p.variant,variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),x=(e=>{const{classes:r,contained:s,size:a,disabled:i,error:n,filled:t,focused:o,required:d}=e,u={root:["root",i&&"disabled",n&&"error",a&&`size${(0,v.A)(a)}`,s&&"contained",o&&"focused",t&&"filled",d&&"required"]};return(0,l.A)(u,j,r)})(h);return(0,g.jsx)(F,(0,a.A)({as:d,ownerState:h,className:(0,t.A)(x.root,o),ref:r},c,{children:" "===n?P||(P=(0,g.jsx)("span",{className:"notranslate",children:"\u200b"})):n}))}));var S=s(6101);function T(e){return(0,b.Ay)("MuiTextField",e)}(0,w.A)("MuiTextField",["root"]);const z=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],W={standard:c.A,filled:m.A,outlined:p.A},q=(0,d.Ay)(x.A,{name:"MuiTextField",slot:"Root",overridesResolver:(e,r)=>r.root})({}),N=n.forwardRef((function(e,r){const s=(0,u.b)({props:e,name:"MuiTextField"}),{autoComplete:n,autoFocus:d=!1,children:c,className:m,color:p="primary",defaultValue:x,disabled:f=!1,error:A=!1,FormHelperTextProps:v,fullWidth:w=!1,helperText:b,id:j,InputLabelProps:y,inputProps:P,InputProps:C,inputRef:F,label:N,maxRows:M,minRows:$,multiline:k=!1,name:H,onBlur:I,onChange:B,onFocus:L,placeholder:V,required:D=!1,rows:E,select:U=!1,SelectProps:_,type:Z,value:G,variant:J="outlined"}=s,K=(0,i.A)(s,z),O=(0,a.A)({},s,{autoFocus:d,color:p,disabled:f,error:A,fullWidth:w,multiline:k,required:D,select:U,variant:J}),Q=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"]},T,r)})(O);const X={};"outlined"===J&&(y&&"undefined"!==typeof y.shrink&&(X.notched=y.shrink),X.label=N),U&&(_&&_.native||(X.id=void 0),X["aria-describedby"]=void 0);const Y=(0,o.A)(j),ee=b&&Y?`${Y}-helper-text`:void 0,re=N&&Y?`${Y}-label`:void 0,se=W[J],ae=(0,g.jsx)(se,(0,a.A)({"aria-describedby":ee,autoComplete:n,autoFocus:d,defaultValue:x,fullWidth:w,multiline:k,name:H,rows:E,maxRows:M,minRows:$,type:Z,value:G,id:Y,inputRef:F,onBlur:I,onChange:B,onFocus:L,placeholder:V,inputProps:P},X,C));return(0,g.jsxs)(q,(0,a.A)({className:(0,t.A)(Q.root,m),disabled:f,error:A,fullWidth:w,ref:r,required:D,color:p,variant:J,ownerState:O},K,{children:[null!=N&&""!==N&&(0,g.jsx)(h.A,(0,a.A)({htmlFor:Y,id:re},y,{children:N})),U?(0,g.jsx)(S.A,(0,a.A)({"aria-describedby":ee,id:Y,labelId:re,value:G,input:ae},_,{children:c})):ae,b&&(0,g.jsx)(R,(0,a.A)({id:ee},v,{children:b}))]}))}))}}]);